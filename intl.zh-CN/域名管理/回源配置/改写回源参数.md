# 改写回源参数

当您需要改写用户回源请求URL中的参数时，可以配置回源参数改写功能。通过本文，您可以了解配置回源参数改写功能的操作步骤。

当用户请求URL中携带的参数信息与您需要发送给源站的参数信息不一致时，您可以配置多个回源参数改写规则，实现忽略、添加、删除、保留、修改等多种操作。

1.  登录[CDN控制台](https://cdn.console.aliyun.com)。

2.  在左侧导航栏，单击**域名管理**。

3.  在**域名管理**页面，单击目标域名对应的**管理**。

4.  在指定域名的左侧导航栏，单击**回源配置**。

5.  单击**回源参数改写**页签。

6.  打开**使用回源参数改写**开关。

    ![回源参数改写](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1764788951/p83519.jpg)

7.  配置回源参数改写操作。

    您可以根据需求配置不同的操作类型，也可以在一种操作类型的参数框里面添加多个参数。更多信息，请参见[操作样例](#example_cmf_gh1_big)。

    ![回源参数改写](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1186669161/p85278.png)

8.  单击**确定**，使改写操作开始执行和生效。

    您也可以在**回源参数改写**页面，单击**修改配置**，对当前配置的规则进行修改操作。

    ![回源参数改写](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1764788951/p85281.png)

    改写回源参数需要注意如下事项：

    -   改写规则的优先级为：**添加参数**＞**删除参数**＞**仅保留**＞**修改参数**。
    -   **忽略参数**功能和**仅保留**功能互斥，要避免出现两个功能同时配置的情况，以免出现功能冲突。
    -   开启**忽略参数**功能（同时**仅保留**功能的输入框留空）的情况下，将会忽略原始URL中携带的所有参数，但是由于添加参数和删除参数操作的优先级更高，添加参数和删除参数操作仍会生效。
    -   在**仅保留**功能的输入框内填写需要保留的参数（同时关闭**忽略参数**功能），将只会保留原始URL中携带的指定参数，但是由于添加参数和删除参数操作的优先级更高，添加参数和删除参数操作仍会生效。
    **说明：**

    与其他功能的冲突说明如下：

    -   **回源参数改写**功能对URL中参数的改写，可能会与**回源URI改写**功能在配置执行规则`enhance_break`的情况下相冲突，这两个功能同时配置的时候，需要注意避免配置冲突。
    -   **回源参数改写**功能对URL中参数的改写，可能会与**域名管理** \> **性能优化**页面中的**保留参数**或**忽略参数**功能相冲突，这三个功能同时配置的时候，需要注意避免配置冲突。
    -   **回源参数改写**功能的作为位置是在CDN回源节点上面，不影响CDN内部链路，不改写缓存key，而**保留参数**或**忽略参数**功能的作用位置是在CDN边缘节点上面，会影响CDN内部链路，也会改写缓存key。

样例一：

|忽略参数|开启|
|添加参数|无|
|删除参数|无|
|仅保留|无|
|修改参数|无|
|结果说明|原始请求：`http://domain.com/index.html?code1=1&code2=2&code3=3`改写后的回源请求：`http://domain.com/index.html` |

样例二：

|忽略参数|无|
|添加参数|无|
|删除参数|无|
|仅保留|code2|
|修改参数|无|
|结果说明|原始请求：`http://domain.com/index.html?code1=1&code2=2&code3=3`改写后的回源请求：`http://domain.com/index.html?code2=2` |

样例三：

|忽略参数|无|
|添加参数|code4=4|
|删除参数|code2|
|仅保留|无|
|修改参数|code3=0|
|结果说明|原始请求：`http://domain.com/index.html?code1=1&code2=2&code3=3`改写后的回源请求：`http://domain.com/index.html?code1=1&code3=0&code4=4` |

**相关文档**  


[批量配置域名](/intl.zh-CN/新版API参考/域名管理类接口/批量配置域名.md)

