---
keyword: 工作原理
---

# 工作原理

通过以下案例，您可以了解CDN的工作原理。

假设您的加速域名为`www.a.com`，接入CDN网络，开始使用加速服务后，当终端用户（北京）发起HTTP请求时，处理流程如下图所示。

![工作原理](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3452323261/p4886.png)

1.  当终端用户（北京）向`www.a.com`下的指定资源发起请求时，首先向LDNS（本地DNS）发起域名解析请求。
2.  LDNS检查缓存中是否有`www.a.com`的IP地址记录。如果有，则直接返回给终端用户；如果没有，则向授权DNS查询。
3.  当授权DNS解析`www.a.com`时，返回域名CNAME `www.a.tbcdn.com`对应IP地址。
4.  域名解析请求发送至阿里云DNS调度系统，并为请求分配最佳节点IP地址。
5.  LDNS获取DNS返回的解析IP地址。
6.  用户获取解析IP地址。
7.  用户向获取的IP地址发起对该资源的访问请求。
    -   如果该IP地址对应的节点已缓存该资源，则会将数据直接返回给用户，例如，图中步骤7和8，请求结束。
    -   如果该IP地址对应的节点未缓存该资源，则节点向源站发起对该资源的请求。获取资源后，结合用户自定义配置的缓存策略，将资源缓存至节点，例如，图中的北京节点，并返回给用户，请求结束。配置缓存策略的操作方法，请参见[缓存配置](/cn.zh-CN/域名管理/缓存配置/配置缓存过期时间.md)。

